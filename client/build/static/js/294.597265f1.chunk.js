"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[294],{762:function(n,e,t){var i,r=t(168),o=(t(791),t(31)),a=t(184),s=o.ZP.div(i||(i=(0,r.Z)(["\n  .lds-ellipsis {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .lds-ellipsis div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #5db075;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n  }\n  .lds-ellipsis div:nth-child(1) {\n    left: 8px;\n    animation: lds-ellipsis1 0.6s infinite;\n  }\n  .lds-ellipsis div:nth-child(2) {\n    left: 8px;\n    animation: lds-ellipsis2 0.6s infinite;\n  }\n  .lds-ellipsis div:nth-child(3) {\n    left: 32px;\n    animation: lds-ellipsis2 0.6s infinite;\n  }\n  .lds-ellipsis div:nth-child(4) {\n    left: 56px;\n    animation: lds-ellipsis3 0.6s infinite;\n  }\n  @keyframes lds-ellipsis1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes lds-ellipsis3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes lds-ellipsis2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n"])));e.Z=function(){return(0,a.jsx)(s,{children:(0,a.jsxs)("div",{className:"lds-ellipsis",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]})})}},294:function(n,e,t){t.r(e),t.d(e,{default:function(){return R}});var i=t(907);var r=t(181);function o(n){return function(n){if(Array.isArray(n))return(0,i.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||(0,r.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a,s,c,d=t(165),l=t(861),p=t(885),u=t(168),m=t(763),f=t(791),h=t(221),b=t(173),x=t(31),v=t(155),g=t(762),E=t(184),w=x.ZP.div(a||(a=(0,u.Z)(["\n  z-index: 2;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n\n  overflow-y: auto;\n  position: absolute;\n  top: 90px;\n  margin: 0;\n  padding: 0;\n  scroll-behavior: smooth;\n  @media only screen and (max-width: 600px) {\n    width: calc(90vw);\n    left: calc(5vw);\n    height: calc(100vh - 90px - 40px);\n  }\n  @media only screen and (min-width: 600px) {\n    width: 540px;\n    left: calc(50vw - 270px);\n    height: calc(100vh - 90px - 60px);\n  }\n  background-color: transparent;\n\n  .chat-bubble {\n    padding: 10px 14px;\n    background: #f6f6f6;\n    margin: 5px;\n    border-radius: 5px;\n    position: relative;\n    width: auto;\n    margin-bottom: 10px;\n    overflow-wrap: break-word;\n    text-align: left;\n  }\n  .chat-bubble:after {\n    content: '';\n    position: absolute;\n    top: 100%;\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    border-bottom: 0;\n  }\n  .chat-bubble--left:after {\n    left: 0;\n    border-top-color: #f6f6f6;\n    border-bottom: 0;\n    border-left: 0;\n  }\n  .chat-bubble--right:after {\n    right: 0;\n    border-top-color: #5db075;\n    border-bottom: 0;\n    border-right: 0;\n  }\n  .chat-bubble.chat-bubble--left {\n    border-bottom-left-radius: 0;\n  }\n  .chat-bubble.chat-bubble--right {\n    background: #5db075;\n    border-bottom-right-radius: 0;\n    color: #fff;\n  }\n  .chat-bubble-system {\n    padding: 10px 14px;\n    background: #f6f6f6;\n    border-radius: 5px;\n    position: relative;\n    width: auto;\n    margin-bottom: 10px;\n    overflow-wrap: break-word;\n    font-size: 10px;\n    border-radius: 1.375rem;\n    margin: 5px !important;\n    text-align: center;\n  }\n"]))),y=x.ZP.div(s||(s=(0,u.Z)(["\n  display: flex;\n  justify-content: ",";\n\n  .message-sender {\n    margin-left: 5px;\n    font-size: 10px;\n    text-align: left;\n  }\n"])),(function(n){var e=n.message;return(0,m.isEmpty)(e.sender)?"center":(0,m.isEqual)(e.sender,n.me)?"flex-end":"flex-start"})),S=x.ZP.div(c||(c=(0,u.Z)([""]))),_=function(n,e){return(0,m.isEmpty)(n)?"chat-bubble-system":(0,m.isEqual)(n,e)?"chat-bubble chat-bubble--right":"chat-bubble chat-bubble--left"};var T,O,P=function(n){var e=n.messages,t=n.me;return n.roomId,(0,E.jsx)(w,{id:"messages-list",children:e.map((function(n){return(0,E.jsx)(y,{message:n,me:t,id:(0,m.get)(n,"_id"),children:(0,E.jsxs)("div",{style:{marginBottom:10},children:[!(0,m.isEmpty)(n.sender)&&!(0,m.isEqual)(n.sender,t)&&(0,E.jsx)("div",{className:"message-sender",children:n.sender}),(0,E.jsx)(S,{className:_(n.sender,t),children:n.message})]})},(0,m.get)(n,"_id")+Math.floor(1e3+9e3*Math.random()))}))})},j=t(683),Z=x.ZP.div(T||(T=(0,u.Z)(["\n  z-index: 5;\n  background-color: #f6f6f6;\n  border: #e8e8e8;\n\n  border-radius: 1.375rem;\n  margin: 0 auto 0 auto;\n  position: absolute;\n  bottom: 10px;\n  @media only screen and (max-width: 600px) {\n    width: calc(90vw);\n    left: calc(5vw);\n    height: 40px;\n  }\n  @media only screen and (min-width: 600px) {\n    width: 540px;\n    left: calc(50vw - 270px);\n    height: 60px;\n  }\n\n  .message-input {\n    background: transparent;\n    border: none;\n    outline: none !important;\n    height: 100%;\n    width: calc(100% - 40px);\n    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */\n    -moz-box-sizing: border-box; /* Firefox, other Gecko */\n    box-sizing: border-box; /* Opera/IE 8+ */\n    resize: none;\n    font-size: 15px;\n    margin: 0 40px 0 0;\n    color: #444;\n    border-radius: 1.375rem;\n    padding-top: 10px;\n    padding-bottom: 0;\n    padding-right: 0 !important;\n    padding-left: 15px;\n    display: inline-block;\n    vertical-align: middle;\n  }\n  .message-submit {\n    position: absolute;\n\n    right: 5px;\n    background-color: #5db075;\n    border: none;\n    color: #fff;\n\n    text-transform: uppercase;\n    line-height: 1;\n\n    outline: none !important;\n    transition: background 0.2s ease;\n    cursor: pointer;\n\n    padding: 0;\n    @media only screen and (max-width: 600px) {\n      width: 30px;\n      height: 30px;\n      top: 5px;\n      border-radius: 15px;\n      font-size: 18px;\n    }\n    @media only screen and (min-width: 600px) {\n      width: 40px;\n      height: 40px;\n      top: 10px;\n      border-radius: 20px;\n      font-size: 24px;\n    }\n  }\n\n  .message-submit:disabled {\n    opacity: 0.5;\n  }\n"])));function k(n){var e=(0,f.useState)(""),t=(0,p.Z)(e,2),i=t[0],r=t[1];return(0,E.jsxs)(Z,(0,j.Z)((0,j.Z)({},n),{},{children:[(0,E.jsx)("textarea",{type:"text",value:i,className:"message-input",placeholder:"Message here ...",onChange:function(n){r(n.target.value)}}),(0,E.jsx)("button",{type:"submit",className:"message-submit",disabled:(0,m.isEmpty)(i),onClick:function(){n.onSubmit&&n.onSubmit(i),r("")},children:"\u2191"})]}))}var C=x.ZP.div(O||(O=(0,u.Z)(["\n  height: 90px;\n  z-index: 2;\n  position: absolute;\n  top: 0;\n  @media only screen and (max-width: 600px) {\n    min-width: calc(90vw);\n    left: calc(5vw);\n  }\n  @media only screen and (min-width: 600px) {\n    width: 540px;\n    left: calc(50vw - 270px);\n  }\n  display: flex;\n  align-items: center;\n\n  .nav-left,\n  .nav-right {\n    @media only screen and (max-width: 600px) {\n      width: 32px;\n    }\n    @media only screen and (min-width: 600px) {\n      width: 32px;\n    }\n    color: #5db075;\n    display: inline-flex;\n    cursor: pointer;\n    background-color: transparent;\n    border: none;\n    outline: none;\n    font-size: 15px;\n    padding: 0;\n    text-align: center;\n    justify-content: center;\n  }\n\n  .nav-title {\n    display: inline;\n\n    @media only screen and (max-width: 600px) {\n      width: calc(90vw - 64px);\n    }\n    @media only screen and (min-width: 600px) {\n      width: calc(540px - 64px);\n    }\n  }\n"])));var R=function(){var n=(0,b.UO)(),e=new URL(window.location.href).searchParams,t=(0,f.useState)(!0),i=(0,p.Z)(t,2),r=i[0],a=i[1],s=n.roomId,c=e.get("u")||void 0,u=(0,f.useState)([]),x=(0,p.Z)(u,2),w=x[0],y=x[1],S=(0,b.k6)(),_=(0,f.useState)(!1),T=(0,p.Z)(_,2),O=T[0],j=T[1],Z=function(){var n=function(){var n=(0,l.Z)((0,d.Z)().mark((function n(){var e,t,i,r,o;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_API_END_POINT||"/api/v1","/room-message/").concat(s),t={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},n.prev=2,n.next=5,fetch(e,t);case 5:return i=n.sent,n.next=8,i.json();case 8:r=n.sent,o=(0,m.get)(r,"data",[]),y((0,m.reverse)(o)),setTimeout((function(){R()}),200),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(2),h.fn.error("Something went wrong",void 0,1500),console.log(n.t0);case 18:a(!1);case 19:case"end":return n.stop()}}),n,null,[[2,14]])})));return function(){return n.apply(this,arguments)}}();n()},R=function(){var n=document.getElementById("messages-list");n&&(n.scrollTop=n.scrollHeight)};return(0,f.useEffect)((function(){if((0,m.isEmpty)(s)||(0,m.isEmpty)(c))h.fn.error("Please enter your roomID and username first",void 0,1500),S.push("".concat(v.Z.HOME));else{var n=function(){var n=(0,l.Z)((0,d.Z)().mark((function n(){var e,t,i,r,a;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_API_END_POINT||"/api/v1","/room-user/").concat(s,"/find"),t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:c})},n.prev=2,n.next=5,fetch(e,t);case 5:return i=n.sent,n.next=8,i.json();case 8:r=n.sent,(0,m.get)(r,"data.exist",!1)?(h.fn.error("Username exists in room. Please try another username",void 0,1500),S.push("".concat(v.Z.HOME,"?r=").concat(s,"&u=").concat(c))):((a=window.SOCKET).on("MESSAGE_RECEIVED",(function(n){y((function(e){var t=o(e).filter((function(e){return(0,m.isEqual)((0,m.get)(e,"_id"),(0,m.get)(n,"_id"))}));return(0,m.isEmpty)(t)?[].concat(o(e),[n]):o(e)})),setTimeout((function(){R()}),200)})),a.emit("subscribe",{roomId:s,username:c}),j(!0),h.fn.success("Welcome to ".concat(s),void 0,500),Z()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}();n()}}),[s,c]),(0,E.jsxs)("div",{className:"full-screen",children:[r&&(0,E.jsx)(g.Z,{}),!r&&s&&c&&(0,E.jsxs)(C,{children:[(0,E.jsx)("button",{type:"button",className:"nav-left",onClick:function(){var n=function(){var n=(0,l.Z)((0,d.Z)().mark((function n(){var e,t,i,r;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_API_END_POINT||"/api/v1","/room-user/").concat(s),t={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:c})},n.prev=2,n.next=5,fetch(e,t);case 5:return i=n.sent,n.next=8,i.json();case 8:r=n.sent,(0,m.get)(r,"success",!1)?(h.fn.success("You just left ".concat(s),void 0,500),S.push("".concat(v.Z.HOME,"?r=").concat(s,"&u=").concat(c)),O&&window.SOCKET.emit("unsubscribe",{roomId:s,username:c})):h.fn.error("Unable to leave. Please try again",void 0,1500),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),h.fn.error("Something went wrong",void 0,1500),console.log(n.t0);case 17:a(!1);case 18:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}();n()},children:"Exit"}),(0,E.jsx)("h2",{className:"page-title nav-title",children:s}),(0,E.jsx)("div",{className:"nav-right",children:" "})]}),!r&&!(0,m.isEmpty)(w)&&s&&c&&(0,E.jsx)(P,{messages:w,me:c,roomId:s}),!r&&s&&c&&(0,E.jsx)(k,{onSubmit:function(n){var e=function(){var e=(0,l.Z)((0,d.Z)().mark((function e(){var t,i,r,o,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SERVER_API_END_POINT||"/api/v1","/room-message/").concat(s),i={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sender:c,message:n})},e.prev=2,e.next=5,fetch(t,i);case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,a=(0,m.get)(o,"data",{}),(0,m.get)(o,"success",!1)&&!(0,m.isEmpty)(a)&&window.SOCKET.emit("MESSAGE_SEND",a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),h.fn.error("Something went wrong",void 0,1500),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();e()}})]})}}}]);
//# sourceMappingURL=294.597265f1.chunk.js.map